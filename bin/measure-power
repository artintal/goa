#!/bin/bash
#
#
#
. $(dirname $0)/common

BENCHMARK=$1
SLEEP=30

msg "benchmark $BENCHMARK"

unset SIZES[0]
unset SIZES[1]

rm ~/measure-power-finished
 for size in ${SIZES[@]};do
    case $size in
        small)  reps=100;;
        medium) reps=50;;
        large)  reps=50;;
        huge)   reps=1;;
    esac
    rm -rf benchmarks/$BENCHMARK/$BENCHMARK.{input,output}
    mgmt output $BENCHMARK -s $size
    for exe in "$@";do
        sleep $SLEEP
        msg "$exe $size"
        "$BASE"/bin/run $BENCHMARK $exe -l "" -s $size -w -r $reps
    done
done
date > ~/measure-power-finished
