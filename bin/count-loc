#!/bin/bash
#
# Usage: count-loc [OPTIONS...]
#  Count the lines of code for benchmark programs
#
# Options:
#  -b,--bench BENCH -- limit to give benchmark
#  
. $(dirname $0)/common

## Parse Options
eval set -- $(getopt -o b: -l bench: -- "$@" || help;)
while [ $# -gt 0 ];do
    case $1 in
        -b|--bench) BENCHMARKS=($2); shift;;
        (--) shift; break;;
        (-*) error "unrecognized option $1";;
        (*)  break;;
    esac
    shift
done

( # TODO: is it possible to count the c/cpp from here as well?
    echo "benchmark ASM"
    for bench in ${BENCHMARKS[@]};do
        "$BASE"/bin/mgmt compile $bench >/dev/null
        echo "$bench $(wc -l "$BASE"/benchmarks/$bench/$bench.s|cut -d' ' -f1)"
    done
)|column -t
